{"absId":"rave@0.4.3/pipeline/locatePackage","pluginId":"curl/loader/cjsm11","resourceId":"rave@0.4.3/pipeline/locatePackage","loader":true,"source":"define('rave@0.4.3/pipeline/locatePackage',['require','exports','module'],function(require,exports,module,define){/** @license MIT License (c) copyright 2014 original authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\nmodule.exports = locatePackage;\n\nvar path = require('../lib/path');\nvar parseUid = require('../lib/uid').parse;\nvar metadata = require('../lib/metadata');\n\nfunction locatePackage (load) {\n\tvar options, parts, packageName, modulePath, moduleName, descriptor,\n\t\tlocation;\n\n\toptions = load.metadata.rave;\n\n\tif (!options.packages) throw new Error('Packages not provided: ' + load.name);\n\n\tparts = parseUid(load.name);\n\tpackageName = parts.pkgUid || parts.pkgName;\n\tmodulePath = parts.modulePath;\n\n\tdescriptor = options.packages[packageName];\n\tif (!descriptor) throw new Error('Package not found: ' + load.name);\n\n\tmoduleName = modulePath || descriptor.main;\n\tif (!load.metadata.dontAddExt) {\n\t\tmoduleName = path.ensureExt(moduleName, '.js')\n\t}\n\n\tlocation = descriptor.location;\n\tif (!path.isAbsUrl(location) && options.baseUrl) {\n\t\t// prepend baseUrl\n\t\tlocation = path.joinPaths(options.baseUrl, location);\n\t}\n\n\treturn path.joinPaths(location, moduleName);\n}\n\n});\n\n","modules":[{"pos":0,"count":113,"id":"rave@0.4.3/pipeline/locatePackage","depList":["require","exports","module"],"factory":true,"argList":["require","exports","module","define"],"requires":[{"id":"rave@0.4.3/lib/path","pos":277,"count":22},{"id":"rave@0.4.3/lib/uid","pos":316,"count":21},{"id":"rave@0.4.3/lib/metadata","pos":360,"count":26}]}],"compileTime":"2014-11-17T20:58:47.369Z"}